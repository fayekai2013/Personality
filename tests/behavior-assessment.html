<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Communication Style Assessment | å€‹äººæºé€šé¢¨æ ¼è©•ä¼°</title>
    <meta name="description" content="Professional assessment to identify your primary communication patterns and behavioral tendencies in interpersonal interactions.">

    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <link rel="stylesheet" href="../assets/css/behavior-assessment.css?v=2">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
    <div class="assessment-container">
        <!-- Navigation Header -->
        <nav class="nav-header">
            <a href="../index.html" class="logo">
                <span class="text-en">Explore Yourself</span>
                <span class="text-zh" style="display: none;">æ¢ç´¢è‡ªæˆ‘</span>
            </a>
            <div class="nav-meta">
                <div class="language-toggle">
                    <button class="lang-btn active" data-lang="en">EN</button>
                    <button class="lang-btn" data-lang="zh">ä¸­æ–‡</button>
                </div>
                <a href="../index.html" class="back-link">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                        <path d="M19 12H5M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span class="text-en">Back to Home</span>
                    <span class="text-zh" style="display: none;">å›åˆ°é¦–é </span>
                </a>
            </div>
        </nav>

        <!-- Assessment Header -->
        <header class="assessment-header">
            <div class="header-content">
                <div class="assessment-icon">ğŸ§ </div>
                <h1 class="assessment-title">
                    <span class="text-en">Your Authentic Communication Style</span>
                    <span class="text-zh" style="display: none;">æ‚¨çœŸå¯¦çš„æºé€šé¢¨æ ¼</span>
                </h1>
                <p class="assessment-subtitle">
                    <span class="text-en">Discover how you naturally communicate and process information. Through 60 questions, you'll uncover your authentic communication styleâ€”how you absorb information, make decisions, and connect with others.</span>
                    <span class="text-zh" style="display: none;">ç™¼ç¾ä½ è‡ªç„¶çš„æºé€šå’Œè³‡è¨Šè™•ç†æ–¹å¼ã€‚é€é 60 é“é¡Œç›®ï¼Œæ­ç¤ºä½ çœŸå¯¦çš„æºé€šé¢¨æ ¼â€”â€”ä½ å¦‚ä½•å¸æ”¶è³‡è¨Šã€åšæ±ºå®šã€èˆ‡ä»–äººé€£çµã€‚</span>
                </p>
                
                <div class="assessment-info">
                    <div class="info-stat">
                        <span class="stat-number">60</span>
                        <span class="stat-label">
                            <span class="text-en">Questions</span>
                            <span class="text-zh" style="display: none;">é¡Œç›®</span>
                        </span>
                    </div>
                    <div class="info-stat">
                        <span class="stat-number">8-12</span>
                        <span class="stat-label">
                            <span class="text-en">Minutes</span>
                            <span class="text-zh" style="display: none;">åˆ†é˜</span>
                        </span>
                    </div>
                    <div class="info-stat">
                        <span class="stat-number">6</span>
                        <span class="stat-label">
                            <span class="text-en">Types</span>
                            <span class="text-zh" style="display: none;">é¡å‹</span>
                        </span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Instructions Panel -->
        <section class="instructions-panel">
            <div class="instructions-content">
                <h3 class="instructions-title">
                    <span class="text-en">Assessment Instructions</span>
                    <span class="text-zh" style="display: none;">è©•ä¼°èªªæ˜</span>
                </h3>
                
                <div class="instructions-text">
                    <div class="text-en">
                        <p>This assessment evaluates your natural communication patterns and information processing style. Answer each question based on how you typically behave and think. There are no right or wrong answersâ€”respond honestly to get accurate results.</p>
                    </div>
                    <div class="text-zh" style="display: none;">
                        <p>æ­¤è©•ä¼°è©•ä¼°æ‚¨è‡ªç„¶çš„æºé€šæ¨¡å¼å’Œè³‡è¨Šè™•ç†é¢¨æ ¼ã€‚è«‹æ ¹æ“šæ‚¨é€šå¸¸çš„è¡Œç‚ºå’Œæ€è€ƒæ–¹å¼å›ç­”æ¯å€‹å•é¡Œã€‚æ²’æœ‰å°éŒ¯ç­”æ¡ˆâ€”â€”èª å¯¦å›ç­”ä»¥ç²å¾—æº–ç¢ºçµæœã€‚</p>
                    </div>
                </div>
                


                <div class="important-notes">
                    <div class="note-item">
                        <span class="note-icon">ğŸ’¡</span>
                        <span class="text-en">Trust your first instinct - it's usually the most authentic</span>
                        <span class="text-zh" style="display: none;">ç›¸ä¿¡æ‚¨çš„ç¬¬ä¸€ç›´è¦ºï¼Œé€šå¸¸æ˜¯æœ€çœŸå¯¦çš„</span>
                    </div>
                    <div class="note-item">
                        <span class="note-icon">ğŸŒˆ</span>
                        <span class="text-en">Every answer is valid - this is about discovering your unique style</span>
                        <span class="text-zh" style="display: none;">æ¯å€‹ç­”æ¡ˆéƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œé€™æ˜¯ç‚ºäº†ç™¼ç¾æ‚¨ç¨ç‰¹çš„é¢¨æ ¼</span>
                    </div>
                    <div class="note-item">
                        <span class="note-icon">ğŸ</span>
                        <span class="text-en">Your personalized insights will be delivered to your email</span>
                        <span class="text-zh" style="display: none;">æ‚¨çš„å€‹äººåŒ–æ´å¯Ÿå°‡ç™¼é€åˆ°æ‚¨çš„é›»å­éƒµä»¶</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Assessment Form -->
        <main class="assessment-main">
            <form id="assessmentForm" class="assessment-form">
                <!-- Name Input Section -->
                <div class="name-input-section">
                    <div class="input-group">
                        <label for="studentName" class="input-label">
                            <span class="label-icon">ğŸ‘¤</span>
                            <span class="text-en">Your Full Name</span>
                            <span class="text-zh" style="display: none;">æ‚¨çš„çœŸå¯¦å§“å</span>
                            <span class="required-mark">*</span>
                        </label>
                        <input type="text" id="studentName" name="studentName" required 
                               class="name-input"
                               placeholder="Enter your full name / è«‹è¼¸å…¥æ‚¨çš„çœŸå¯¦å§“å">
                    </div>
                    
                    <div class="input-group">
                        <label for="studentEmail" class="input-label">
                            <span class="label-icon">ğŸ“§</span>
                            <span class="text-en">Your Email Address</span>
                            <span class="text-zh" style="display: none;">æ‚¨çš„é›»å­éƒµä»¶åœ°å€</span>
                            <span class="required-mark">*</span>
                        </label>
                        <input type="email" id="studentEmail" name="studentEmail" required 
                               class="name-input"
                               placeholder="Enter your email / è«‹è¼¸å…¥æ‚¨çš„é›»å­éƒµä»¶">
                    </div>
                </div>



                <!-- Questions Container -->
                <div id="questionsContainer" class="questions-container">
                    <!-- Questions will be populated by JavaScript -->
                </div>

                <!-- Submit Section -->
                <div class="submit-section">
                    <button type="submit" id="submitBtn" class="submit-button" disabled>
                        <span class="button-content">
                            <span class="button-icon">âœ¨</span>
                            <span class="button-text">
                                <span class="text-en">Reveal My Authentic Self</span>
                                <span class="text-zh" style="display: none;">æ­ç¤ºçœŸå¯¦çš„è‡ªæˆ‘</span>
                            </span>
                        </span>
                        <div class="button-shine"></div>
                    </button>
                    
                    <p class="submit-note">
                        <span class="text-en">Your personalized insights will arrive in your inbox moments after completion</span>
                        <span class="text-zh" style="display: none;">æ‚¨çš„å€‹äººåŒ–æ´å¯Ÿå°‡åœ¨å®Œæˆå¾Œç«‹å³ç™¼é€åˆ°æ‚¨çš„æ”¶ä»¶ç®±</span>
                    </p>
                </div>
            </form>
        </main>


    </div>

    <script>
        // Initialize EmailJS
        emailjs.init("I2KqoGsE81K29GmFC");

        // Language Toggle Functionality with inheritance from homepage
        function initializeLanguageToggle() {
            // Get language preference from sessionStorage (set by language selection)
            const savedLang = sessionStorage.getItem('selectedLanguage') || 'en';
            
            const langButtons = document.querySelectorAll('.lang-btn');
            const enElements = document.querySelectorAll('.text-en');
            const zhElements = document.querySelectorAll('.text-zh');
            
            // Apply saved language immediately
            if (savedLang === 'zh') {
                langButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.lang === 'zh'));
                enElements.forEach(el => el.style.display = 'none');
                zhElements.forEach(el => el.style.display = '');
                document.documentElement.lang = 'zh-TW';
                updatePlaceholders('zh');
            } else {
                langButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.lang === 'en'));
                enElements.forEach(el => el.style.display = '');
                zhElements.forEach(el => el.style.display = 'none');
                document.documentElement.lang = 'en';
                updatePlaceholders('en');
            }
            
            langButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const lang = btn.dataset.lang;
                    
                    // Update button states
                    langButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    // Save language preference for current session
                    sessionStorage.setItem('selectedLanguage', lang);
                    
                    // Toggle language visibility
                    if (lang === 'en') {
                        enElements.forEach(el => el.style.display = '');
                        zhElements.forEach(el => el.style.display = 'none');
                        document.documentElement.lang = 'en';
                        updatePlaceholders('en');
                    } else {
                        enElements.forEach(el => el.style.display = 'none');
                        zhElements.forEach(el => el.style.display = '');
                        document.documentElement.lang = 'zh-TW';
                        updatePlaceholders('zh');
                    }
                    
                    // Regenerate questions in the new language
                    generateQuestions();
                });
            });
        }

        function updatePlaceholders(lang) {
            const nameInput = document.getElementById('studentName');
            const emailInput = document.getElementById('studentEmail');
            if (lang === 'en') {
                nameInput.placeholder = 'Enter your full name';
                emailInput.placeholder = 'Enter your email address';
            } else {
                nameInput.placeholder = 'è«‹è¼¸å…¥æ‚¨çš„çœŸå¯¦å§“å';
                emailInput.placeholder = 'è«‹è¼¸å…¥æ‚¨çš„é›»å­éƒµä»¶';
            }
        }

        // High-Quality Behavior Assessment Questions with Traditional Chinese Translations
        const questions = {
            en: [
                // Pleaser
                "I'm known for being flexible and accommodating to others' schedules and needs.",
                "Before sharing my opinion, I consider how it might affect the feelings of others.",
                "I'm good at finding common ground and expressing ideas in a way that resonates with people.",
                "I feel a sense of accomplishment when I can create a positive and harmonious environment for everyone.",
                "I'm open to reconsidering my views when presented with different perspectives from the group.",
                "I enjoy being a team player and am always willing to step up and help where needed.",
                "I often listen more than I speak, making sure everyone feels heard and valued.",
                "I choose my words carefully to ensure my message is received in the most constructive way possible.",
                "I'm quick to take responsibility to resolve misunderstandings and smooth things over.",
                "I prioritize the group's overall happiness and success, even if it means making personal compromises.",
                // Worrier
                "I'm skilled at identifying potential risks and planning for contingencies.",
                "I believe in being thorough and thinking through all potential outcomes before making a move.",
                "I feel most comfortable when I have a clear plan and know what to expect.",
                "I take decision-making very seriously, carefully weighing the pros and cons of each option.",
                "My attention to detail means I often catch potential errors that others might miss.",
                "I believe that careful risk assessment is the foundation of any successful project.",
                "I perform best in stable environments where processes are well-defined.",
                "I'm a proactive thinker, always considering future challenges and how to prepare for them.",
                "I prefer to have a comprehensive plan in place before starting a new project.",
                "I pride myself on being prepared for a wide range of situations.",
                // Prover
                "I am highly motivated by new challenges and opportunities to demonstrate my skills.",
                "I have a strong sense of urgency and am focused on delivering results efficiently.",
                "I believe that consistent high performance is the key to professional growth.",
                "I take pride in my ability to handle difficult situations independently.",
                "Once I complete a goal, I'm immediately eager to start on the next one.",
                "I hold myself to a high standard of performance and always strive to go the extra mile.",
                "I am very conscious of my professional image and strive to be seen as highly competent.",
                "I find that tangible results and achievements are the most meaningful measure of success.",
                "I'm driven to develop a wide range of skills to be effective in any situation.",
                "I prefer to figure things out on my own before asking for assistance.",
                // Critic
                "I believe in setting high benchmarks for quality in any work I'm involved with.",
                "I am driven by a desire to refine and improve things until they are the best they can be.",
                "I have a talent for spotting potential problems or areas for improvement that others might overlook.",
                "Even when a project is successful, I focus on the lessons learned for next time.",
                "I have a strong sense of accountability and take errors very seriously.",
                "I believe that constructive feedback is more valuable than simple praise.",
                "I believe that attention to the smallest details is what separates good work from great work.",
                "I operate with a clear sense of what is right and what needs to be done.",
                "I am always thinking about how we can elevate our current performance to the next level.",
                "I have a clear vision of excellence and am not easily satisfied with mediocrity.",
                // Avoider
                "I find that I'm most productive when a deadline is approaching.",
                "I believe that many problems resolve themselves if given enough time.",
                "When facing a major decision, I prefer to gather as much information as possible, even if it delays the outcome.",
                "I tend to focus my energy on things I know I can change, rather than on large, complex situations.",
                "Discussing the challenges of a situation helps me process it, even before I'm ready to act.",
                "I often feel it's better to wait for the right opportunity to act rather than forcing a solution.",
                "I value a team approach where the person best suited for a task takes the lead.",
                "I believe maintaining group harmony is often more important than debating every single point.",
                "I recognize that external factors often play a significant role in the outcome of a situation.",
                "I prefer to choose a proven path to success, even if a riskier option might offer a higher reward.",
                // Martyr
                "I derive a great deal of satisfaction from supporting others and putting their needs first.",
                "I prefer to handle things myself rather than burdening others with my requests.",
                "I'm the person people turn to when they need someone to take on a difficult or time-consuming task.",
                "I believe that rewards and personal time should come after my responsibilities are fully met.",
                "Sometimes, I feel that my efforts and contributions are not fully appreciated by others.",
                "I often give my all to a project or a person, without expecting anything in return.",
                "I'm very generous with my time and energy, even when my own resources are low.",
                "I have a strong sense of empathy and often feel responsible for the well-being of those around me.",
                "I'm energized by helping others, although it can sometimes leave me feeling drained.",
                "I believe that one of the most noble things a person can do is to dedicate themselves to the service of others."
            ],
            zh: [
                // Pleaser - å–æ‚…è€…
                "æˆ‘ä»¥èƒ½å¤ éˆæ´»é…åˆä»–äººçš„æ™‚ç¨‹å’Œéœ€æ±‚è€Œèåã€‚",
                "åœ¨åˆ†äº«æˆ‘çš„æ„è¦‹ä¹‹å‰ï¼Œæˆ‘æœƒå…ˆè€ƒæ…®å®ƒå¯èƒ½å°ä»–äººçš„æ„Ÿå—ç”¢ç”Ÿä»€éº¼å½±éŸ¿ã€‚",
                "æˆ‘æ“…é•·å°‹æ‰¾å…±åŒé»ï¼Œä¸¦ä»¥èƒ½å¼•èµ·å…±é³´çš„æ–¹å¼è¡¨é”æƒ³æ³•ã€‚",
                "ç•¶æˆ‘èƒ½ç‚ºå¤§å®¶å‰µé€ ä¸€å€‹æ­£é¢å’Œè«§çš„ç’°å¢ƒæ™‚ï¼Œæˆ‘æœƒå¾ˆæœ‰æˆå°±æ„Ÿã€‚",
                "ç•¶åœ˜éšŠæå‡ºä¸åŒè§€é»æ™‚ï¼Œæˆ‘å°é‡æ–°è€ƒæ…®è‡ªå·±çš„çœ‹æ³•æŒé–‹æ”¾æ…‹åº¦ã€‚",
                "æˆ‘æ¨‚æ–¼æˆç‚ºåœ˜éšŠçš„ä¸€ä»½å­ï¼Œä¸¦ä¸”ç¸½æ˜¯å¾ˆé¡˜æ„åœ¨éœ€è¦çš„åœ°æ–¹æŒºèº«è€Œå‡ºã€‚",
                "æˆ‘é€šå¸¸è½å¾—å¤šèªªå¾—å°‘ï¼Œä»¥ç¢ºä¿æ¯å€‹äººéƒ½æ„Ÿè¦ºè¢«å‚¾è½å’Œé‡è¦–ã€‚",
                "æˆ‘æœƒè¬¹æ…é¸æ“‡ç”¨è©ï¼Œä»¥ç¢ºä¿æˆ‘çš„è¨Šæ¯èƒ½ä»¥æœ€å…·å»ºè¨­æ€§çš„æ–¹å¼è¢«æ¥æ”¶ã€‚",
                "æˆ‘æœƒå¾ˆå¿«åœ°æ‰¿æ“”è²¬ä»»ï¼Œä»¥åŒ–è§£èª¤æœƒä¸¦è®“äº‹æƒ…åœ“æ»¿ã€‚",
                "æˆ‘æœƒå„ªå…ˆè€ƒæ…®åœ˜éšŠæ•´é«”çš„å¿«æ¨‚èˆ‡æˆåŠŸï¼Œå³ä½¿é€™æ„å‘³è‘—éœ€è¦åšå‡ºå€‹äººå¦¥å”ã€‚",
                // Worrier - æ“”æ†‚è€…
                "æˆ‘æ“…é•·è­˜åˆ¥æ½›åœ¨é¢¨éšªä¸¦ç‚ºå„ç¨®æ„å¤–æƒ…æ³åˆ¶å®šè¨ˆç•«ã€‚",
                "æˆ‘ç›¸ä¿¡åœ¨è¡Œå‹•å‰ï¼Œæ‡‰è©²è¦å¾¹åº•æ€è€ƒæ‰€æœ‰å¯èƒ½çš„çµæœã€‚",
                "ç•¶æˆ‘æœ‰æ˜ç¢ºçš„è¨ˆç•«ä¸¦çŸ¥é“æœƒç™¼ç”Ÿä»€éº¼äº‹æ™‚ï¼Œæˆ‘æœƒæ„Ÿåˆ°æœ€è‡ªåœ¨ã€‚",
                "æˆ‘éå¸¸åš´è‚…åœ°å°å¾…æ±ºç­–ï¼Œæœƒä»”ç´°æ¬Šè¡¡æ¯å€‹é¸é …çš„åˆ©å¼Šã€‚",
                "æˆ‘å°ç´°ç¯€çš„é—œæ³¨ï¼Œæ„å‘³è‘—æˆ‘ç¶“å¸¸èƒ½ç™¼ç¾åˆ¥äººå¯èƒ½å¿½ç•¥çš„æ½›åœ¨éŒ¯èª¤ã€‚",
                "æˆ‘ç›¸ä¿¡è¬¹æ…çš„é¢¨éšªè©•ä¼°æ˜¯ä»»ä½•æˆåŠŸå°ˆæ¡ˆçš„åŸºç¤ã€‚",
                "åœ¨æµç¨‹å®šç¾©æ˜ç¢ºçš„ç©©å®šç’°å¢ƒä¸­ï¼Œæˆ‘çš„è¡¨ç¾æœ€å¥½ã€‚",
                "æˆ‘æ˜¯ä¸€å€‹ç©æ¥µæ€è€ƒè€…ï¼Œç¸½æ˜¯åœ¨è€ƒæ…®æœªä¾†çš„æŒ‘æˆ°ä»¥åŠå¦‚ä½•ç‚ºä¹‹æº–å‚™ã€‚",
                "åœ¨é–‹å§‹ä¸€å€‹æ–°å°ˆæ¡ˆä¹‹å‰ï¼Œæˆ‘åå¥½å…ˆæœ‰ä¸€å€‹å‘¨å…¨çš„è¨ˆç•«ã€‚",
                "æˆ‘ç‚ºè‡ªå·±èƒ½å°å„ç¨®æƒ…æ³éƒ½åšå¥½æº–å‚™è€Œæ„Ÿåˆ°è‡ªè±ªã€‚",
                // Prover - è­‰æ˜è€…
                "æ–°çš„æŒ‘æˆ°å’Œèƒ½å±•ç¤ºæˆ‘æŠ€èƒ½çš„æ©Ÿæœƒï¼Œç¸½èƒ½æ¿€å‹µæˆ‘ã€‚",
                "æˆ‘æœ‰å¼·çƒˆçš„æ€¥è¿«æ„Ÿï¼Œä¸¦å°ˆæ³¨æ–¼æœ‰æ•ˆç‡åœ°äº¤ä»˜æˆæœã€‚",
                "æˆ‘ç›¸ä¿¡æŒçºŒçš„é«˜ç¸¾æ•ˆæ˜¯è·æ¥­æˆé•·çš„é—œéµã€‚",
                "æˆ‘ç‚ºè‡ªå·±èƒ½å¤ ç¨ç«‹è™•ç†å›°é›£æƒ…æ³çš„èƒ½åŠ›æ„Ÿåˆ°è‡ªè±ªã€‚",
                "ä¸€æ—¦å®Œæˆä¸€å€‹ç›®æ¨™ï¼Œæˆ‘æœƒç«‹åˆ»æ¸´æœ›é–‹å§‹ä¸‹ä¸€å€‹ã€‚",
                "æˆ‘å°è‡ªå·±çš„è¡¨ç¾æœ‰å¾ˆé«˜çš„æ¨™æº–ï¼Œä¸¦ä¸”ç¸½æ˜¯åŠªåŠ›åšåˆ°æœ€å¥½ã€‚",
                "æˆ‘éå¸¸åœ¨æ„æˆ‘çš„å°ˆæ¥­å½¢è±¡ï¼Œä¸¦åŠªåŠ›è®“è‡ªå·±è¢«è¦–ç‚ºéå¸¸æœ‰èƒ½åŠ›ã€‚",
                "æˆ‘ç™¼ç¾å…·é«”çš„æˆæœå’Œæˆå°±æ˜¯æœ€æœ‰æ„ç¾©çš„æˆåŠŸè¡¡é‡æ¨™æº–ã€‚",
                "æˆ‘è‡´åŠ›æ–¼ç™¼å±•å¤šæ–¹é¢çš„æŠ€èƒ½ï¼Œä»¥ä¾¿åœ¨ä»»ä½•æƒ…æ³ä¸‹éƒ½èƒ½æ‡‰ä»˜è‡ªå¦‚ã€‚",
                "åœ¨å°‹æ±‚å”åŠ©ä¹‹å‰ï¼Œæˆ‘å‚¾å‘æ–¼å…ˆè‡ªå·±æƒ³è¾¦æ³•è§£æ±ºå•é¡Œã€‚",
                // Critic - æ‰¹è©•è€…
                "æˆ‘ç›¸ä¿¡åœ¨æˆ‘åƒèˆ‡çš„ä»»ä½•å·¥ä½œä¸­ï¼Œéƒ½æ‡‰è©²ç‚ºå“è³ªè¨­å®šé«˜æ¨™æº–ã€‚",
                "æˆ‘è¢«ä¸€ç¨®æ¸´æœ›é©…å‹•ï¼Œæƒ³è¦ä¸æ–·æ”¹é€²äº‹ç‰©ç›´åˆ°å®ƒå€‘é”åˆ°æœ€ä½³ç‹€æ…‹ã€‚",
                "æˆ‘æœ‰ä¸€ç¨®å¤©è³¦ï¼Œèƒ½ç™¼ç¾åˆ¥äººå¯èƒ½å¿½ç•¥çš„æ½›åœ¨å•é¡Œæˆ–å¯æ”¹é€²ä¹‹è™•ã€‚",
                "å³ä½¿å°ˆæ¡ˆæˆåŠŸäº†ï¼Œæˆ‘é‚„æ˜¯æœƒå°ˆæ³¨æ–¼ç‚ºä¸‹ä¸€æ¬¡è¨˜å–æ•™è¨“ã€‚",
                "æˆ‘æœ‰å¼·çƒˆçš„è²¬ä»»æ„Ÿï¼Œä¸¦éå¸¸åš´è‚…åœ°çœ‹å¾…éŒ¯èª¤ã€‚",
                "æˆ‘ç›¸ä¿¡å»ºè¨­æ€§çš„å›é¥‹æ¯”å–®ç´”çš„è®šç¾æ›´æœ‰åƒ¹å€¼ã€‚",
                "æˆ‘ç›¸ä¿¡å°æœ€å°ç´°ç¯€çš„é—œæ³¨ï¼Œæ˜¯å€åˆ†ã€Œå¥½ã€èˆ‡ã€Œå“è¶Šã€ä½œå“çš„é—œéµã€‚",
                "æˆ‘å°ä»€éº¼æ˜¯æ­£ç¢ºçš„ã€ä»€éº¼æ˜¯éœ€è¦å®Œæˆçš„æœ‰æ¸…æ™°çš„èªçŸ¥ã€‚",
                "æˆ‘ç¸½æ˜¯åœ¨æ€è€ƒå¦‚ä½•å°‡æˆ‘å€‘ç›®å‰çš„è¡¨ç¾æå‡åˆ°ä¸‹ä¸€å€‹å±¤æ¬¡ã€‚",
                "æˆ‘å°å“è¶Šæœ‰æ¸…æ™°çš„é¡˜æ™¯ï¼Œä¸”ä¸å®¹æ˜“å°å¹³åº¸æ„Ÿåˆ°æ»¿æ„ã€‚",
                // Avoider - è¿´é¿è€…
                "æˆ‘ç™¼ç¾åœ¨æˆªæ­¢æ—¥æœŸå¿«åˆ°æ™‚ï¼Œæˆ‘çš„å·¥ä½œæ•ˆç‡æœ€é«˜ã€‚",
                "æˆ‘ç›¸ä¿¡åªè¦çµ¦äºˆè¶³å¤ çš„æ™‚é–“ï¼Œè¨±å¤šå•é¡Œæœƒè‡ªè¡Œè§£æ±ºã€‚",
                "é¢å°é‡å¤§æ±ºå®šæ™‚ï¼Œæˆ‘å¯§é¡˜ç›¡å¯èƒ½æ”¶é›†è³‡è¨Šï¼Œå³ä½¿é€™æœƒå»¶å¾Œçµæœã€‚",
                "æˆ‘å‚¾å‘æ–¼å°‡ç²¾åŠ›é›†ä¸­åœ¨æˆ‘çŸ¥é“å¯ä»¥æ”¹è®Šçš„äº‹æƒ…ä¸Šï¼Œè€Œä¸æ˜¯æ‡‰å°é¾å¤§è¤‡é›œçš„å±€å‹¢ã€‚",
                "è¨è«–ä¸€å€‹æƒ…æ³çš„æŒ‘æˆ°æœ‰åŠ©æ–¼æˆ‘æ¶ˆåŒ–å®ƒï¼Œå³ä½¿æˆ‘é‚„æ²’æº–å‚™å¥½æ¡å–è¡Œå‹•ã€‚",
                "æˆ‘å¸¸è¦ºå¾—ç­‰å¾…é©ç•¶çš„æ™‚æ©Ÿè¡Œå‹•ï¼Œæ¯”å¼·è¡Œæ¨å‡ºè§£æ±ºæ–¹æ¡ˆæ›´å¥½ã€‚",
                "æˆ‘é‡è¦–åœ˜éšŠåˆä½œï¼Œç”±æœ€é©åˆçš„äººä¾†ä¸»å°ä»»å‹™ã€‚",
                "æˆ‘ç›¸ä¿¡ç¶­æŒåœ˜éšŠå’Œè«§ï¼Œå¾€å¾€æ¯”çˆ­è«–æ¯ä¸€å€‹è§€é»ä¾†å¾—æ›´é‡è¦ã€‚",
                "æˆ‘é«”èªåˆ°å¤–åœ¨å› ç´ å¸¸å¸¸åœ¨äº‹æƒ…çš„çµæœä¸­æ‰®æ¼”é‡è¦è§’è‰²ã€‚",
                "æˆ‘å¯§é¡˜é¸æ“‡ä¸€æ¢å·²ç¶“è¢«è­‰å¯¦çš„æˆåŠŸè·¯å¾‘ï¼Œå³ä½¿å†’éšªå¯èƒ½å¸¶ä¾†æ›´é«˜çš„å›å ±ã€‚",
                // Martyr - æ®‰é“è€…
                "æˆ‘å¾æ”¯æŒä»–äººä¸¦å°‡ä»–å€‘çš„éœ€â€‹â€‹æ±‚æ”¾åœ¨ç¬¬ä¸€ä½ä¸­ï¼Œç²å¾—æ¥µå¤§çš„æ»¿è¶³æ„Ÿã€‚",
                "æˆ‘å¯§é¡˜è‡ªå·±è™•ç†äº‹æƒ…ï¼Œä¹Ÿä¸é¡˜å› æˆ‘çš„è«‹æ±‚è€Œçµ¦åˆ¥äººå¸¶ä¾†è² æ“”ã€‚",
                "ç•¶äººå€‘éœ€è¦æœ‰äººæ‰¿æ“”å›°é›£æˆ–è€—æ™‚çš„ä»»å‹™æ™‚ï¼Œä»–å€‘æœƒä¾†æ‰¾æˆ‘ã€‚",
                "æˆ‘ç›¸ä¿¡çå‹µå’Œå€‹äººæ™‚é–“ï¼Œæ‡‰è©²åœ¨æˆ‘å®Œå…¨å±¥è¡Œè·è²¬ä¹‹å¾Œæ‰åˆ°ä¾†ã€‚",
                "æœ‰æ™‚å€™ï¼Œæˆ‘æ„Ÿè¦ºåˆ°æˆ‘çš„åŠªåŠ›å’Œè²¢ç»æ²’æœ‰å¾—åˆ°ä»–äººçš„å……åˆ†è³è­˜ã€‚",
                "æˆ‘ç¶“å¸¸ç‚ºä¸€å€‹å°ˆæ¡ˆæˆ–ä¸€å€‹äººä»˜å‡ºæˆ‘çš„å…¨éƒ¨ï¼Œè€Œä¸æœŸæœ›ä»»ä½•å›å ±ã€‚",
                "å³ä½¿åœ¨æˆ‘è‡ªå·±çš„è³‡æºä¸è¶³æ™‚ï¼Œæˆ‘å°æˆ‘çš„æ™‚é–“å’Œç²¾åŠ›ä¹Ÿéå¸¸æ…·æ…¨ã€‚",
                "æˆ‘æœ‰å¼·çƒˆçš„åŒç†å¿ƒï¼Œä¸¦æ™‚å¸¸å°å‘¨é­çš„äººçš„å¹¸ç¦æ„Ÿæ„Ÿåˆ°æœ‰è²¬ä»»ã€‚",
                "å¹«åŠ©ä»–äººèƒ½çµ¦æˆ‘å¸¶ä¾†æ´»åŠ›ï¼Œå„˜ç®¡æœ‰æ™‚ä¹Ÿæœƒè®“æˆ‘æ„Ÿåˆ°ç²¾ç–²åŠ›ç«­ã€‚",
                "æˆ‘ç›¸ä¿¡ä¸€å€‹äººèƒ½åšçš„æœ€é«˜å°šçš„äº‹æƒ…ä¹‹ä¸€ï¼Œå°±æ˜¯è‡´åŠ›æ–¼ç‚ºä»–äººæœå‹™ã€‚"
            ]
        };

        // Progress Tracking
        let currentProgress = 0;
        const totalQuestions = 60;

        // Create and shuffle the question order
        const randomizedOrder = Array.from({ length: totalQuestions }, (_, i) => i);
        // Fisher-Yates shuffle algorithm
        for (let i = randomizedOrder.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [randomizedOrder[i], randomizedOrder[j]] = [randomizedOrder[j], randomizedOrder[i]];
        }

        function updateProgress() {
            const progressNumber = document.getElementById('progressNumber');
            const progressRing = document.getElementById('progressRing');
            
            const percentage = Math.round((currentProgress / totalQuestions) * 100);
            
            // Update text
            progressNumber.textContent = currentProgress;
            
            // Update circular progress bar
            const circumference = 2 * Math.PI * 25; // radius is 25
            const offset = circumference - (percentage / 100) * circumference;
            progressRing.style.strokeDasharray = circumference;
            progressRing.style.strokeDashoffset = offset;
        }

        // Generate Questions
        function generateQuestions() {
            const container = document.getElementById('questionsContainer');
            const currentLang = document.querySelector('.lang-btn.active').dataset.lang;
            const questionSet = questions[currentLang];
            
            container.innerHTML = '';
            
            randomizedOrder.forEach((originalIndex, i) => {
                const question = questionSet[originalIndex];
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-item';
                questionDiv.dataset.originalIndex = originalIndex; // Store original index

                const labels = currentLang === 'en' ? 
                    ['Strongly Disagree', 'Disagree', 'Neutral', 'Agree', 'Strongly Agree'] :
                    ['éå¸¸ä¸åŒæ„', 'ä¸åŒæ„', 'ä¸­ç«‹', 'åŒæ„', 'éå¸¸åŒæ„'];

                questionDiv.innerHTML = `
                    <div class="question-header">
                        <span class="question-number">${i + 1}</span>
                        <p class="question-text">${question}</p>
                    </div>
                    <div class="rating-container">
                        <div class="rating-options">
                            ${labels.map((label, value) => `
                                <div class="rating-option">
                                    <input type="radio" 
                                           id="q${i}_${value + 1}" 
                                           name="q${i}" 
                                           value="${value + 1}" 
                                           required
                                           data-question="${i}">
                                    <label for="q${i}_${value + 1}" class="rating-label">
                                        <span class="rating-number">${value + 1}</span>
                                        <span class="rating-text">${label}</span>
                                    </label>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(questionDiv);
            });

            // Add event listeners for progress tracking
            const radioButtons = container.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => {
                radio.addEventListener('change', () => {
                    updateProgressFromAnswers();
                });
            });
        }

        function updateProgressFromAnswers() {
            const answeredQuestions = new Set();
            
            // Count answered questions by checking if any radio button is selected for each question
            for (let i = 0; i < totalQuestions; i++) {
                const questionRadios = document.querySelectorAll(`input[name="q${i}"]`);
                const isAnswered = Array.from(questionRadios).some(radio => radio.checked);
                if (isAnswered) {
                    answeredQuestions.add(`q${i}`);
                }
            }
            
            currentProgress = answeredQuestions.size;
            updateProgress();
            
            // Enable submit button when all questions are answered
            const submitBtn = document.getElementById('submitBtn');
            const studentName = document.getElementById('studentName').value.trim();
            const studentEmail = document.getElementById('studentEmail').value.trim();
            
            if (currentProgress === totalQuestions && studentName && studentEmail) {
                submitBtn.disabled = false;
                submitBtn.classList.add('ready');
            } else {
                submitBtn.disabled = true;
                submitBtn.classList.remove('ready');
            }
        }

        // Form Submission
        document.getElementById('assessmentForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const studentName = document.getElementById('studentName').value.trim();
            const studentEmail = document.getElementById('studentEmail').value.trim();
            const currentLang = document.querySelector('.lang-btn.active').dataset.lang;
            
            // Validate inputs
            if (!studentName) {
                alert(currentLang === 'en' ? 'Please enter your name.' : 'è«‹è¼¸å…¥æ‚¨çš„å§“åã€‚');
                return;
            }
            
            if (!studentEmail) {
                alert(currentLang === 'en' ? 'Please enter your email address.' : 'è«‹è¼¸å…¥æ‚¨çš„é›»å­éƒµä»¶åœ°å€ã€‚');
                return;
            }
            
            // Collect answers
            const answers = [];
            const typeScores = [0, 0, 0, 0, 0, 0]; // 6 personality types
            
            const questionItems = document.querySelectorAll('.question-item');
            questionItems.forEach((q_item, i) => {
                const selectedRadio = q_item.querySelector(`input[name="q${i}"]:checked`);
                if (selectedRadio) {
                    const answerValue = parseInt(selectedRadio.value);
                    answers.push(answerValue); // Store answer in display order

                    const originalIndex = parseInt(q_item.dataset.originalIndex);
                    const typeIndex = Math.floor(originalIndex / 10);
                    typeScores[typeIndex] += answerValue;
                }
            });
            
            // Calculate percentages
            const typePercentages = typeScores.map(score => Math.round((score / 50) * 100));
            const totalScore = answers.reduce((sum, answer) => sum + answer, 0);
            
            // Determine dominant type
            const maxScore = Math.max(...typePercentages);
            const dominantTypeIndex = typePercentages.indexOf(maxScore);
            
            const typeNames = {
                en: ['Pleaser', 'Worrier', 'Prover', 'Critic', 'Avoider', 'Martyr'],
                zh: ['å–æ‚…è€…', 'æ“”æ†‚è€…', 'è­‰æ˜è€…', 'æ‰¹è©•è€…', 'è¿´é¿è€…', 'æ®‰é“è€…']
            };
            
            const resultCategory = typeNames[currentLang][dominantTypeIndex];
            const resultDescription = currentLang === 'en' ? 
                `Your dominant behavioral pattern is ${resultCategory} with ${maxScore}% tendency. This indicates your primary psychological approach to challenges and relationships.` :
                `æ‚¨çš„ä¸»è¦è¡Œç‚ºæ¨¡å¼æ˜¯${resultCategory}ï¼Œå‚¾å‘åº¦ç‚º${maxScore}%ã€‚é€™é¡¯ç¤ºäº†æ‚¨é¢å°æŒ‘æˆ°å’Œäººéš›é—œä¿‚çš„ä¸»è¦å¿ƒç†æ–¹å¼ã€‚`;
            
            // Prepare email content
            const emailContent = `
                Student Name: ${studentName}
                Assessment: Personality Behavior Pattern Assessment
                Completion Date: ${new Date().toLocaleString()}
                
                Results Summary:
                Total Score: ${totalScore}/${totalQuestions * 5}
                Dominant Type: ${resultCategory} (${maxScore}%)
                
                Type Breakdown:
                ${typeNames.en.map((name, index) => `${name}: ${typePercentages[index]}%`).join('\n')}
                
                Description: ${resultDescription}
                
                Individual Question Responses:
                ${answers.map((answer, index) => `Question ${index + 1}: ${answer}/5`).join('\n')}
            `;
            
            try {
                // Store results and redirect (skip email for now)
                sessionStorage.setItem('assessmentResults', JSON.stringify({
                    studentName,
                    testType: 'Personality Behavior Pattern Assessment',
                    totalScore,
                    resultCategory,
                    resultDescription,
                    typePercentages,
                    answers,
                    completionDate: new Date().toLocaleString()
                }));
                
                // Try to send email but don't block on failure
                try {
                    // Create type breakdown for personality assessment
                    const typeNames = currentLang === 'en' ? 
                        ['Pleaser', 'Worrier', 'Prover', 'Critic', 'Avoider', 'Martyr'] :
                        ['å–æ‚…è€…', 'æ“”æ†‚è€…', 'è­‰æ˜è€…', 'æ‰¹è©•è€…', 'è¿´é¿è€…', 'æ®‰é“è€…'];
                    
                    const breakdownHtml = `
                        <div style="background-color: white; border-radius: 8px; padding: 16px; margin-top: 16px;">
                            <h5 style="margin: 0 0 12px 0; color: #667eea; font-size: 14px;">${currentLang === 'en' ? 'Personality Type Breakdown:' : 'äººæ ¼é¡å‹åˆ†æï¼š'}</h5>
                            ${typePercentages.map((percentage, index) => {
                                const isTop = percentage === maxScore;
                                return `<div style="display: flex; justify-content: space-between; margin-bottom: 8px; padding: 6px 12px; background-color: ${isTop ? '#f0f4ff' : '#f8f9fa'}; border-radius: 4px; ${isTop ? 'border-left: 3px solid #667eea;' : ''}">
                                    <span style="font-size: 13px; color: #555;">${typeNames[index]}${isTop ? ' â­' : ''}</span>
                                    <span style="font-weight: ${isTop ? 'bold' : 'normal'}; color: ${isTop ? '#667eea' : '#666'}; font-size: 13px;">${percentage}%</span>
                                </div>`;
                            }).join('')}
                        </div>
                    `;
                    
                    // Prepare multilingual email content
                    const emailData = {
                        student_name: studentName,
                        student_email: studentEmail || document.getElementById('studentEmail').value,
                        test_type: currentLang === 'en' ? "Personality Behavior Pattern Assessment" : "äººæ ¼è¡Œç‚ºæ¨¡å¼è©•ä¼°",
                        completion_date: new Date().toLocaleDateString(),
                        message: emailContent,
                        
                        // Header content
                        header_emoji: "ğŸ§ ",
                        header_title: currentLang === 'en' ? "Personality Results" : "äººæ ¼è©•ä¼°çµæœ",
                        
                        // Greeting and messages
                        greeting: currentLang === 'en' ? "Hello" : "æ‚¨å¥½",
                        completion_message: currentLang === 'en' ? 
                            "Thank you for completing the Personality Behavior Pattern Assessment! Your detailed personality analysis is ready." :
                            "æ„Ÿè¬æ‚¨å®Œæˆäººæ ¼è¡Œç‚ºæ¨¡å¼è©•ä¼°ï¼æ‚¨çš„è©³ç´°äººæ ¼åˆ†æå·²æº–å‚™å¥½ã€‚",
                            
                        // Results section
                        results_title: currentLang === 'en' ? "Your Personality Profile" : "æ‚¨çš„äººæ ¼æª”æ¡ˆ",
                        main_score: `${maxScore}%`,
                        score_label: currentLang === 'en' ? "Dominant Pattern Strength" : "ä¸»è¦æ¨¡å¼å¼·åº¦",
                        result_category: resultCategory,
                        result_description: resultDescription,
                        breakdown_section: breakdownHtml,
                        
                        // Insights
                        insights_title: currentLang === 'en' ? "Understanding Your Results" : "ç†è§£æ‚¨çš„çµæœ",
                        insights_text: currentLang === 'en' ? 
                            "Your personality profile reveals patterns in how you think, feel, and behave. Use these insights to understand your natural tendencies and identify opportunities for personal growth." :
                            "æ‚¨çš„äººæ ¼æª”æ¡ˆæ­ç¤ºäº†æ‚¨æ€è€ƒã€æ„Ÿå—å’Œè¡Œç‚ºçš„æ¨¡å¼ã€‚è«‹åˆ©ç”¨é€™äº›æ´å¯Ÿä¾†äº†è§£æ‚¨çš„è‡ªç„¶å‚¾å‘ä¸¦è­˜åˆ¥å€‹äººæˆé•·çš„æ©Ÿæœƒã€‚",
                            
                        // Footer content
                        detailed_title: currentLang === 'en' ? "Complete Assessment Data" : "å®Œæ•´è©•ä¼°æ•¸æ“š",
                        completion_date_label: currentLang === 'en' ? "Assessment completed on:" : "è©•ä¼°å®Œæˆæ—¥æœŸï¼š",
                        questions_text: currentLang === 'en' ? "Questions about your results?" : "å°çµæœæœ‰ç–‘å•ï¼Ÿ",
                        disclaimer_text: currentLang === 'en' ? 
                            "This personality assessment is designed for educational and self-development purposes. Results should be used as a guide for personal reflection and growth." :
                            "æ­¤äººæ ¼è©•ä¼°ç”¨æ–¼æ•™è‚²å’Œè‡ªæˆ‘ç™¼å±•ç›®çš„ã€‚çµæœæ‡‰ä½œç‚ºå€‹äººåæ€å’Œæˆé•·çš„æŒ‡å—ã€‚",
                        footer_brand: currentLang === 'en' ? "Personality Assessment Team" : "äººæ ¼è©•ä¼°æ¸¬è©¦åœ˜éšŠ",
                        footer_subtitle: currentLang === 'en' ? "Professional Psychological Evaluation" : "å°ˆæ¥­å¿ƒç†è©•ä¼°"
                    };
                    
                    // Send to user
                    await emailjs.send("service_2mndbrx", "template_z0l98oa", emailData);
                    
                    // Send to admin (always in English for admin)
                    const adminEmailData = { ...emailData };
                    adminEmailData.student_email = "felicco@gmail.com";
                    adminEmailData.test_type = "Personality Behavior Pattern Assessment";
                    adminEmailData.header_title = "Personality Results";
                    adminEmailData.greeting = "Hello";
                    adminEmailData.completion_message = `${studentName} has completed the Personality Behavior Pattern Assessment. Results summary attached.`;
                    
                    await emailjs.send("service_2mndbrx", "template_z0l98oa", adminEmailData);
                    
                    console.log('Emails sent successfully');
                } catch (emailError) {
                    console.log('Email failed but continuing to results:', emailError);
                }
                
                window.location.href = 'results.html';
                
            } catch (error) {
                console.error('Error processing assessment:', error);
                alert(currentLang === 'en' ? 
                    'There was an error processing your results. Please try again.' :
                    'è™•ç†æ‚¨çš„çµæœæ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹é‡è©¦ã€‚');
            }
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeLanguageToggle();
            generateQuestions();
            updateProgress();
            
            // Add input listeners for real-time validation
            document.getElementById('studentName').addEventListener('input', updateProgressFromAnswers);
            document.getElementById('studentEmail').addEventListener('input', updateProgressFromAnswers);
        });
    </script>

    <!-- Floating Progress Indicator - positioned above scale reference -->
    <div id="progressIndicator" class="floating-progress floating-progress-stacked">
        <div class="progress-circle">
            <svg class="progress-ring" width="60" height="60">
                <circle class="progress-ring-background" cx="30" cy="30" r="25"></circle>
                <circle class="progress-ring-progress" cx="30" cy="30" r="25" id="progressRing"></circle>
            </svg>
            <div class="progress-text">
                <span id="progressNumber">0</span>
                <span class="progress-total">/60</span>
            </div>
        </div>
        <div class="progress-label-text">
            <span class="text-en">Progress</span>
            <span class="text-zh" style="display: none;">é€²åº¦</span>
        </div>
    </div>
</body>
</html> 